<!-- {% extends 'base.html' %}
{% block content %} -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I-L-A Login and Signup</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> <!-- SweetAlert2 for nicer alerts -->
    <style>
        body{
            background-color: #383d4d;
        }
        
    </style>
</head>
<body>
<div class="c">
<section class="forms-section">
    <h1 class="section-title">Welcome</h1>
    <div class="forms">
        <div class="form-wrapper is-active">
            <button type="button" class="switcher switcher-login">
                Login
                <span class="underline"></span>
            </button>
            <form class="form form-login" method="POST" action="{{ url_for('login') }}" onsubmit="return validateLoginForm()">
                <fieldset>
                    <legend>Please, enter your email and password for login.</legend>
                    <div class="input-block">
                        <label for="login-email">E-mail</label>
                        <input id="login-email" type="email" name="email" required>
                    </div>
                    <div class="input-block">
                        <label for="login-password">Password</label>
                        <input id="login-password" type="password" name="password" required>
                    </div>
                    <div>
                        <a href="{{ url_for('forgot_password') }}">Forgot Password?</a>
                    </div>
                </fieldset>
                <button type="submit" class="btn-login">Login</button>
            </form>
        </div>
        <div class="form-wrapper">
            <button type="button" class="switcher switcher-signup">
                Sign Up
                <span class="underline"></span>
            </button>
            <form class="form form-signup" method="POST" action="{{ url_for('signup') }}" onsubmit="return validateSignupForm()">
                <fieldset>
                    <legend>Please, enter your information for signup.</legend>
                    <div class="input-block">
                        <label for="signup-name">Name</label>
                        <input id="signup-name" type="text" name="name" required>
                    </div>
                    <div class="input-block">
                        <label for="signup-dob">Date of Birth</label>
                        <input id="signup-dob" type="date" name="dob" required>
                    </div>
                    <div class="input-block">
                        <label for="signup-phone">Phone Number</label>
                        <input id="signup-phone" type="text" name="phone" required>
                    </div>
                    <div class="input-block">
                        <label for="signup-username">Username</label>
                        <input id="signup-username" type="text" name="username" required>
                    </div>
                    <div class="input-block">
                        <label for="signup-email">E-mail</label>
                        <input id="signup-email" type="email" name="email" required>
                    </div>
                    <div class="input-block">
                        <label for="signup-password">Password</label>
                        <input id="signup-password" type="password" name="password" required>
                    </div>
                    <div class="input-block">
                        <label for="signup-role">Role</label>
                        <select id="signup-role" name="role" required>
                            <option value="student">Student</option>
                            <option value="teacher">Teacher</option>
                        </select>
                    </div>
                </fieldset>
                <button type="submit" class="btn-login">Sign Up</button>
            </form>
            <div id="user-exists-message" style="display: none; color: red;">
                User already exists. Please use a different email.
            </div>
        </div>
    </div>
</div>
</section>

<script>
    document.querySelectorAll('.switcher').forEach(item => {
        item.addEventListener('click', function() {
            document.querySelectorAll('.form-wrapper').forEach(wrapper => {
                wrapper.classList.toggle('is-active');
            });
        });
    });

    function validateLoginForm() {
        var email = document.getElementById('login-email').value;
        var password = document.getElementById('login-password').value;
        if (!email || !password) {
            Swal.fire({
                icon: 'error',
                title: 'Validation Error',
                text: 'Please fill in all fields.',
                confirmButtonText: 'OK'
            });
            return false;
        }
        return true;
    }

    function validateSignupForm() {
        var name = document.getElementById('signup-name').value;
        var dob = document.getElementById('signup-dob').value;
        var phone = document.getElementById('signup-phone').value;
        var username = document.getElementById('signup-username').value;
        var email = document.getElementById('signup-email').value;
        var password = document.getElementById('signup-password').value;
        var role = document.getElementById('signup-role').value;
        if (!name || !dob || !phone || !username || !email || !password || !role) {
            Swal.fire({
                icon: 'error',
                title: 'Validation Error',
                text: 'Please fill in all fields.',
                confirmButtonText: 'OK'
            });
            return false;
        }
        return true;
    }
</script>

</body>
</html>
<!-- {% endblock %} -->
